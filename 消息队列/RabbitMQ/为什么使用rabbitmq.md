### 为什么要引入MQ系统，直接读写数据库不行吗？

- 实现消费者和生产者之间的解耦
- 使用消息队列达到异步下单的效果，排队中，后台进行逻辑下单。
- 对于高并发场景下，利用消息队列可以**使得同步访问变为串行访问达到一定量的限流**，利于数据库的操作。



### 消息队列有什么优缺点？

优点：

- 解耦：发布消息的系统和处理消息的系统不需要有直接交互或依赖。
- 异步：大数据量的处理可以变为异步。
- 削峰：将大量请求保存在mq中，数据库慢慢处理。



缺点：

- 系统可用性降低：引入新的组件，崩溃概率变高。
- 系统复杂度变高：消息队列如何保证消息不丢失、不重复、按序。
- 一致性：如果是订阅模型，有的写库有的还没写，消息是否需要被删。



### RabbitMQ 的高可用性如何保证

rabbitmq有三种模式：

- 单机模式：无可用性保证。
- 普通集群：也没有可用性保证，主要是为了处理多队列的情况（每个队列实体只存在于其中一条机器上），类似于负载均衡。
- 镜像集群：可以要求数据同步到所有节点或同步到指定的一些节点上。